"use strict";function userAgent(){for(var t=navigator.userAgent.toLowerCase(),e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return!!n.find(function(e){return t.indexOf(e.toLowerCase())>=0})}function select(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;try{return[].slice.call(e.querySelectorAll(t))}catch(t){return[]}}function clamp(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return t<e?e:t>n?n:t}function scrollToElement(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:400,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=t.getBoundingClientRect(),o=document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0);return scrollTo(r.top+o-40,e,n)}function getBounds(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{left:0,top:0,right:innerWidth,bottom:innerHeight},n=e.left,r=e.top,o=e.right,i=e.bottom,a=t.getBoundingClientRect();return a.visible=!(a.left>=o||a.right<=n||a.top>=i||a.bottom<=r),a}var eventThrottleController=function(){function t(t,r,o){var i=e.get(t);i||(i={},Map.prototype.set.call(e,t,i));var a=i[r];a||(i[r]=a={last:null,handler:function(t){a.last=t,n.add(a)},handlers:new Set,stoppedImmediatePropagation:!1},t.addEventListener(r,a.handler)),a.handlers.add(o)}var e=new Map,n=new Set,r=0,o=0;return e.set=function(){return t.apply(void 0,arguments)},e.add=t,e.remove=function(t,n,r){var o=e.get(t);o&&o[n]&&(o[n].handlers.delete(r),0===o[n].handlers.size&&(delete o[n],t.removeEventListener(n,o[n].handler)))},e.dispatch=function(t){(o+=t)>r&&(o=0,n.forEach(function(t){t.last.stopImmediatePropagation=function(){t.stoppedImmediatePropagation=!0},t.handlers.forEach(function(e){!1===t.stoppedImmediatePropagation&&e(t.last)}),t.last=null,n.delete(t),t.stoppedImmediatePropagation=!1}))},e.fire=function(t){"string"==typeof t&&(t=new CustomEvent(t,{})),e.forEach(function(e,n){e[t.type]&&e[t.type].handlers.forEach(function(e){return e(t)})})},Object.defineProperty(e,"throttle",{get:function(){return r},set:function(t){"number"==typeof t&&(r=t)}}),e}(),inViewportClassController=function(){function t(t,e){try{t.dispatchEvent(new CustomEvent(e,{detail:{controller:n}}))}catch(t){}}function e(e,n){var r=n.getBoundingClientRect(),o=!(r.top>innerHeight||r.bottom<0),i=n.classList.contains(e);o&&!i?(n.classList.add(e),t(n,"viewport-enter")):!o&&i&&(n.classList.remove(e),t(n,"viewport-leave"))}var n=new Map;return n.add=function(){n.set.apply(n,arguments)},n.set=function(t,r){return e(r=r||t.getAttribute("data-viewport-class")||"in-viewport",t),Map.prototype.set.call(n,t,r)},eventThrottleController.add(window,"scroll",function(){n.forEach(e)}),n}(),parallaxTransformController=function(){function t(t){return t.map(function(t){return t.replace(/[0123456789\-\.]+/g,"")}).filter(function(t){return o.indexOf(t)>=0})[0]||"%"}function e(t,e){var n=e.getBoundingClientRect(),r=function(t,e,n){return t<e?e:t>n?n:t}((n.top+n.height)/(innerHeight+n.height),0,1);t.forEach(function(t){var n=t.from+(t.to-t.from)*t.easing(r)+t.unit;switch(t.property){case"translateX":case"translateY":var o=e.style.transform||e.style.webkitTransform||e.style.mozTransform||e.style.msTransform;if(o&&o.indexOf("translate(")>=0){var i=o.split("translate("),a=i[0],s=(i=i[1].split(")")).slice(1).join(")");o=a+"translate("+i[0].split(",").map(function(e,r){return"translateX"===t.property&&0===r?n:"translateY"===t.property&&1===r?n:e}).join(",")+")"+s}else o=((o||"")+" translate("+n+",0)").trim();e.style.webkitTransform=o,e.style.mozTransform=o,e.style.msTransform=o,e.style.transform=o;break;default:e.style[t.property]=n}})}function n(){r.forEach(e)}var r=new Map,o=["px","em","vw","vh","vmin","vmax","rem","%"],i={linear:function(t){return t},cubic:function(t){return t*t}};return r.add=function(t){r.set(t)},r.set=function(e){return Map.prototype.set.call(r,e,function(e){var n=i[e.getAttribute("data-parallax-easing")||"cubic"],r=e.getAttribute("data-parallax").split(",").map(function(e,r){var o=e.replace(/:|(\-\>)/g,",").split(","),i=o.length>=3?function(t){return t.split("-").map(function(t,e){return 0==e?t:t[0].toUpperCase()+t.slice(1)}).join("")}(o[0]):"translate"+(r?"Y":"X"),a=function(t){return t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})}(o[0]);return 0===i.indexOf("translate")&&(a="transform"),{_css_property:a,property:i,unit:t(o),from:parseFloat(o.length>=3?o[1]:o[0]),to:parseFloat(o.length>=3?o[2]:o[1]),easing:n}});return e.style.willChange=r.map(function(t){return t._css_property}).join(","),r}(e))},eventThrottleController.add(window,"scroll",n),eventThrottleController.add(window,"resize",n),r}(),createShareElement=function(){var t={linkedin:"http://www.linkedin.com/shareArticle?mini=true&url={articleUrl}&cachabuster={cachebuster}",facebook:"https://www.facebook.com/sharer/sharer.php?u={articleUrl}",twitter:"https://twitter.com/home?status={articleUrl}",email:"mailto:?subject={subject}&body="+encodeURIComponent("I would like to share this page: {articleUrl}"),googleplus:"https://plus.google.com/share?url={articleUrl}"};return function(e){var n=e.url,r=void 0===n?location.href:n,o=e.type,i=void 0===o?"a":o,a=e.className,s=void 0===a?"share__":a,c=e.networks,u=void 0===c?["facebook","twitter","email","linkedin"]:c,l=e.title,d=void 0===l?encodeURIComponent(document.title):l,f=e.wrapper,p=void 0===f?"div":f,h=e.urls,m=void 0===h?t:h;return u.reduce(function(t,e){var n=document.createElement(i);return n.className=s+e,n.href=m[e].replace("{articleUrl}",r).replace("{subject}",d).replace("{cachebuster}",Date.now()),n.target="_blank",n.textContent="share on "+e,t.appendChild(n),t},"string"==typeof p?document.createElement(p):p)}}(),initVimeoPlayer=function(){function t(t){try{window.dispatchEvent(new CustomEvent("adobetagevent",{detail:t}))}catch(t){}}var e=new Promise(function(t,e){var n="https://player.vimeo.com/api/player.js";if(document.querySelector('script[src="'+n+'"]'))t();else{var r=document.createElement("script");r.setAttribute("type","text/javascript"),r.addEventListener("load",t),r.addEventListener("error",e),r.src=n,document.body.appendChild(r)}});return function(n){return new Promise(function(r,o){e.then(function(){function e(){c&&u&&(n.style.width="100%",n.style.height=u/c*n.clientWidth+"px")}function o(t){t=t<0?0:t>1?1:t,v.style.width=100*t+"%",v.style.height=100*t+"%",l.setCurrentTime(t*d),w=.25*Math.floor(t/.25)}function i(t){console.log(t),t=t<0?0:t>1?1:t,_.style.width=100*t+"%",_.style.height=100*t+"%",l.setVolume(t)}var a=(n.parentNode,document.createElement("div")),s=document.createElement("ul");a.className="vimeo player";var c,u,l=new Vimeo.Player(n),d=1,f=n.getAttribute("src"),p=f;l.getVideoWidth().then(function(t){c=t,e()}),l.getVideoHeight().then(function(t){u=t,e()}),window.addEventListener("resize",e),l.getVideoTitle().then(function(t){return p=""+t}),l.on("ended",function(e){t({source:f,title:p,action:"ended"})}),l.getDuration().then(function(t){d=t}),l.getVolume().then(function(t){_.style.width=100*t+"%",_.style.height=100*t+"%"});var h=document.createElement("li");h.className="play",h.addEventListener("click",function(){"play"===h.className?l.play():l.pause()}),l.ready().then(function(){l.on("play",function(){h.className="pause",t({source:f,title:p,action:"play"})}),l.on("pause",function(){h.className="play",t({source:f,title:p,action:"pause"})})});var m=document.createElement("li"),v=document.createElement("span"),g=document.createElement("span"),y=!1,w=0;v.className="progress-bar",g.className="progress-bar-load",m.className="progress",m.appendChild(v),m.appendChild(g),m.addEventListener("mousedown",function(t){y||o(t.offsetX/m.clientWidth),y=!0}),m.addEventListener("mousemove",function(t){y&&o(t.offsetX/m.clientWidth)}),m.addEventListener("mouseup",function(t){y=!1}),m.addEventListener("mouseleave",function(t){y=!1}),l.ready().then(function(){l.on("progress",function(t){g.style.width=100*t.percent+"%",g.style.height=100*t.percent+"%"}),l.on("timeupdate",function(e){v.style.width=100*e.percent+"%",v.style.height=100*e.percent+"%";var n=!1;e.percent>=w+.25&&(n=!0,w+=.25),t({source:f,title:p,action:"time",milestone:e.percent-e.percent%.25||0,isMilestone:n,value:e.percent,duration:d})})});var b=document.createElement("li"),_=document.createElement("span"),E=!1;b.className="volume",b.appendChild(_),b.addEventListener("mousedown",function(t){i(t.offsetX/b.clientWidth),E=!0}),b.addEventListener("mousemove",function(t){E&&i(t.offsetX/b.clientWidth)}),b.addEventListener("mouseup",function(t){E=!1}),b.addEventListener("mouseleave",function(t){E=!1}),s.appendChild(h),s.appendChild(m),s.appendChild(b),n.parentNode.insertBefore(a,n),a.appendChild(n),a.appendChild(s),r({player:l,element:n})})})}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function DispatchAdobeTagEvent(t){try{return window.dispatchEvent(new CustomEvent("adobetagevent",{detail:t})),!0}catch(t){return!1}}function addCNNVimeoTracking(t){if(!1!==DispatchAdobeTagEvent({action:"event-tracking-check"})){var e="Awaiting title...",n="Awaiting url...",r=0,o=t instanceof HTMLElement?new Vimeo.Player(iframe):t;o.ready().then(function(){o.getDuration().then(function(t){r=t}),o.getVideoTitle().then(function(t){e=t,console.log("Added tracking to video "+e)}),o.getVideoId().then(function(t){n=t}),o.on("ended",function(t){return DispatchAdobeTagEvent({source:n,title:e,action:"ended"})}),o.on("play",function(t){return DispatchAdobeTagEvent({source:n,title:e,action:"play"})}),o.on("pause",function(t){return DispatchAdobeTagEvent({source:n,title:e,action:"pause"})});var t=0;o.on("timeupdate",function(o){return DispatchAdobeTagEvent({source:n,title:e,action:"time",milestone:o.percent-o.percent%.25||0,isMilestone:function(){var e=o.percent-o.percent%.25||0;return(e-t>.25||e-t<0)&&(t=e,!0)}(),value:o.percent,duration:r})})})}}"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||function(t){if("Element"in t){var e=t.Element.prototype,n=Object,r=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array.prototype.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},i=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},a=function(t,e){if(""===e)throw new i("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new i("INVALID_CHARACTER_ERR","String contains an invalid character");return o.call(t,e)},s=function(t){for(var e=r.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],o=0,i=n.length;o<i;o++)this.push(n[o]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},c=s.prototype=[],u=function(){return new s(this)};if(i.prototype=Error.prototype,c.item=function(t){return this[t]||null},c.contains=function(t){return-1!==a(this,t+="")},c.add=function(){var t,e=arguments,n=0,r=e.length,o=!1;do{t=e[n]+"",-1===a(this,t)&&(this.push(t),o=!0)}while(++n<r);o&&this._updateClassName()},c.remove=function(){var t,e,n=arguments,r=0,o=n.length,i=!1;do{for(t=n[r]+"",e=a(this,t);-1!==e;)this.splice(e,1),i=!0,e=a(this,t)}while(++r<o);i&&this._updateClassName()},c.toggle=function(t,e){t+="";var n=this.contains(t),r=n?!0!==e&&"remove":!1!==e&&"add";return r&&this[r](t),!0===e||!1===e?e:!n},c.toString=function(){return this.join(" ")},n.defineProperty){var l={get:u,enumerable:!0,configurable:!0};try{n.defineProperty(e,"classList",l)}catch(t){void 0!==t.number&&-2146823252!==t.number||(l.enumerable=!1,n.defineProperty(e,"classList",l))}}else n.prototype.__defineGetter__&&e.__defineGetter__("classList",u)}}(self),function(){var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,r=arguments.length;for(n=0;n<r;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}t=null}()),function(t,e){window.Promise=function(){function e(t){return"function"==typeof t}function n(){var t=setTimeout;return function(){return t(r,1)}}function r(){for(var t=0;t<_;t+=2)(0,N[t])(N[t+1]),N[t]=void 0,N[t+1]=void 0;_=0}function o(t,e){var n=arguments,r=this,o=new this.constructor(a);void 0===o[P]&&g(o);var i=r._state;return i?function(){var t=n[i-1];C(function(){return v(i,o,t,r._result)})}():p(r,o,t,e),o}function i(t){if(t&&"object"===(void 0===t?"undefined":_typeof(t))&&t.constructor===this)return t;var e=new this(a);return u(e,t),e}function a(){}function s(t){try{return t.then}catch(t){return F.error=t,F}}function c(t,n,r){n.constructor===t.constructor&&r===o&&n.constructor.resolve===i?function(t,e){e._state===O?d(t,e._result):e._state===D?f(t,e._result):p(e,void 0,function(e){return u(t,e)},function(e){return f(t,e)})}(t,n):r===F?(f(t,F.error),F.error=null):void 0===r?d(t,n):e(r)?function(t,e,n){C(function(t){var r=!1,o=function(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}(n,e,function(n){r||(r=!0,e!==n?u(t,n):d(t,n))},function(e){r||(r=!0,f(t,e))},t._label);!r&&o&&(r=!0,f(t,o))},t)}(t,n,r):d(t,n)}function u(t,e){t===e?f(t,new TypeError("You cannot resolve a promise with itself")):function(t){var e=void 0===t?"undefined":_typeof(t);return null!==t&&("object"===e||"function"===e)}(e)?c(t,e,s(e)):d(t,e)}function l(t){t._onerror&&t._onerror(t._result),h(t)}function d(t,e){t._state===x&&(t._result=e,t._state=O,0!==t._subscribers.length&&C(h,t))}function f(t,e){t._state===x&&(t._state=D,t._result=e,C(l,t))}function p(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+O]=n,o[i+D]=r,0===i&&t._state&&C(h,t)}function h(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,a=0;a<e.length;a+=3)r=e[a],o=e[a+n],r?v(n,r,o,i):o(i);t._subscribers.length=0}}function m(){this.error=null}function v(t,n,r,o){var i=e(r),a=void 0,s=void 0,c=void 0,l=void 0;if(i){if((a=function(t,e){try{return t(e)}catch(t){return R.error=t,R}}(r,o))===R?(l=!0,s=a.error,a.error=null):c=!0,n===a)return void f(n,new TypeError("A promises callback cannot return that same promise."))}else a=o,c=!0;n._state!==x||(i&&c?u(n,a):l?f(n,s):t===O?d(n,a):t===D&&f(n,a))}function g(t){t[P]=V++,t._state=void 0,t._result=void 0,t._subscribers=[]}function y(t,e){this._instanceConstructor=t,this.promise=new t(a),this.promise[P]||g(this.promise),b(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?d(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&d(this.promise,this._result))):f(this.promise,new Error("Array Methods must be provided an Array"))}function w(t){this[P]=V++,this._result=this._state=void 0,this._subscribers=[],a!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof w?function(t,e){try{e(function(e){u(t,e)},function(e){f(t,e)})}catch(e){f(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var b=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},_=0,E=void 0,A=void 0,C=function(t,e){N[_]=t,N[_+1]=e,2===(_+=2)&&(A?A(r):j())},T="undefined"!=typeof window?window:void 0,L=T||{},S=L.MutationObserver||L.WebKitMutationObserver,k="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),M="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,N=new Array(1e3),j=void 0;j=k?function(){return process.nextTick(r)}:S?function(){var t=0,e=new S(r),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():M?function(){var t=new MessageChannel;return t.port1.onmessage=r,function(){return t.port2.postMessage(0)}}():void 0===T&&"function"==typeof require?function(){try{var t=require("vertx");return void 0!==(E=t.runOnLoop||t.runOnContext)?function(){E(r)}:n()}catch(t){return n()}}():n();var P=Math.random().toString(36).substring(16),x=void 0,O=1,D=2,F=new m,R=new m,V=0;return y.prototype._enumerate=function(t){for(var e=0;this._state===x&&e<t.length;e++)this._eachEntry(t[e],e)},y.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===i){var u=s(t);if(u===o&&t._state!==x)this._settledAt(t._state,e,t._result);else if("function"!=typeof u)this._remaining--,this._result[e]=t;else if(n===w){var l=new n(a);c(l,t,u),this._willSettleAt(l,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},y.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===x&&(this._remaining--,t===D?f(r,n):this._result[e]=n),0===this._remaining&&d(r,this._result)},y.prototype._willSettleAt=function(t,e){var n=this;p(t,void 0,function(t){return n._settledAt(O,e,t)},function(t){return n._settledAt(D,e,t)})},w.all=function(t){return new y(this,t).promise},w.race=function(t){var e=this;return new e(b(t)?function(n,r){for(var o=t.length,i=0;i<o;i++)e.resolve(t[i]).then(n,r)}:function(t,e){return e(new TypeError("You must pass an array to race."))})},w.resolve=i,w.reject=function(t){var e=new this(a);return f(e,t),e},w._setScheduler=function(t){A=t},w._setAsap=function(t){C=t},w._asap=C,w.prototype={constructor:w,then:o,catch:function(t){return this.then(null,t)}},w.polyfill=function(){var e=void 0;if(void 0!==t)e=t;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(t){}if("[object Promise]"===r&&!n.cast)return}e.Promise=w},w.Promise=w,w}()}(),function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var r=(new Date).getTime(),o=Math.max(0,16-(r-t)),i=window.setTimeout(function(){e(r+o)},o);return t=r+o,i}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();